<?php

namespace App\Http\Controllers;

use App\Models\BaseUserModels;
use App\Models\ShopModels;
use App\Models\UserModels;
use Illuminate\Http\Request;

class UserController extends Controller
{
    //
    private $model;
    private $model1;
    private $modelUser;
    private $start=0;
    private $limit=6;

    public function __construct()
    {
        $this->model= new ShopModels();
        $this->model1=new BaseUserModels();
        $this->modelUser=new UserModels();

        // parent::__call($method, $parameters); // TODO: Change the autogenerated stub
    }



  public function index(Request $request)
  {
      //
      $user=auth()->user()->id;
      $code=$request->get('category');
 if($code==null) $code=$request->code;

      switch ($code)
      {

          case 'messages' :
              $count=4;
              $data=$this->modelUser->getMessages($count);
              break;
          case 'likes':
              $count=6;
              $data=$this->modelUser->getLikes($count);
              break;
          case 'obavestenja':
              $count='sve';
              $data=$this->modelUser->getLikes($count);
              $code='obavestenja';
              break;
          case 'poruke':
              $count='sve';
              $data=$this->modelUser->getMessages($count);
              $code='obavestenja';
              break;
          case 'moji_oglasi':
              $data=$this->modelUser->getMyAds(auth()->user()->id,$this->start,$this->limit);
              $code='oglasi';
              break;
          case 'pratim':
              $data=$this->modelUser->getFollowAds(auth()->user()->id,$this->start,$this->limit);
              $code='oglasi';
              break;

      }
     // dd($code);

      if ($request->code!=null) {
          return count($data) > 0 ? view('ajax.shop_ajax', ["userLi" => $data]) : ($data = 404);
      }
      else{

          return view('user',[
             'data'=>$data,
              'code'=>$code
          ]);


      }
      //dd($code);

  }




}
